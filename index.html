<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     SuperMario
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/images/mario3.jpeg" />
  
  
<link rel="stylesheet" href="/css/style.css">

  
<script src="/js/pace.min.js"></script>


  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/mariocover.jpeg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">SuperMario</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-python-day25" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/28/python-day25/"
    >python_day25_python可视化绘图操作</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/28/python-day25/" class="article-date">
  <time datetime="2020-03-28T09:13:13.000Z" itemprop="datePublished">2020-03-28</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h1 id="python-绘图总结"><a href="#python-绘图总结" class="headerlink" title="python 绘图总结"></a>python 绘图总结</h1><p>导入matplotlib包后，可以设置如下代码，解决mac电脑中文显示乱码的问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.rcParams[&#39;font.family&#39;]&#x3D;&#39;Arial Unicode MS&#39;</span><br><span class="line">plt.rcParams[&#39;font.sans-serif&#39;] &#x3D; [&#39;SimHei&#39;]</span><br><span class="line">plt.rcParams[&#39;axes.unicode_minus&#39;] &#x3D; False</span><br></pre></td></tr></table></figure>
      
      <a class="article-more-link" href="/2020/03/28/python-day25/">阅读更多...</a>
      
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96-matplotlib/" rel="tag">可视化 matplotlib</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-python-day-start" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/26/python-day-start/"
    >python_day_start</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/26/python-day-start/" class="article-date">
  <time datetime="2020-03-26T08:03:58.000Z" itemprop="datePublished">2020-03-26</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h1 id="安装python包时添加镜像源："><a href="#安装python包时添加镜像源：" class="headerlink" title="安装python包时添加镜像源："></a>安装python包时添加镜像源：</h1><p><code>pip3 install numpy -i https://pypi.tuna.tsinghua.edu.cn/simple</code></p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%89%E8%A3%85%E5%8C%85-%E9%95%9C%E5%83%8F%E6%BA%90/" rel="tag">安装包 镜像源</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-python-day24" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/25/python-day24/"
    >python_day24_pandas数据清洗小实验</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/25/python-day24/" class="article-date">
  <time datetime="2020-03-25T09:01:07.000Z" itemprop="datePublished">2020-03-25</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <a id="more"></a>
<p>数据清洗流程：<br>读取数据–&gt;数据格式处理–&gt;重复值/缺失值/异常值处理</p>
<h1 id="数据源"><a href="#数据源" class="headerlink" title="数据源"></a>数据源</h1><p>要读取的数据源为亚马逊后台的下载的每月销售数据明细。</p>
<h1 id="读取和初步观察数据"><a href="#读取和初步观察数据" class="headerlink" title="读取和初步观察数据"></a>读取和初步观察数据</h1><p><code>df = pd.read_csv(&#39;/Users/yangqi/Desktop/20195月MonthlyTransaction.csv&#39;)</code><br>此时读取时未添加任何其他参数，均按照默认设置读取，读取后数据为如下形态：<br><img src="/images/pandas1.png" alt=""><br>我们观察得到：<br>数据的前几行为一些亚马逊的说明信息，且不成列。对于我们分析当月的销售情况并没有什么帮助，因此我们考虑将前几行非销售信息的行删除。<br>使用drop方法进行删除<br>用法：DataFrame.drop(labels=None,axis=0, index=None, columns=None, inplace=False)<br>参数说明：<br>labels：要删除的行列的名字，用列表给定<br>axis：默认为0，指删除行，因此删除列是要指定axis=1<br>index：直接指定要删除的行，但是如果需要删除的行太多的话，就不适用。<br>columns：直接指定要删除的列<br>inplace：False表示默认该删除操作不改变原数据，而是返回一个新的DateFrame，True表示直接在原数据上进行删除。<br>这里使用labels方法设置需要删除的行。用range生成连续的需要删除的行。<br><code>df.drop(labels=range(6),inplace=True)</code><br><img src="/images/pandas2.png" alt=""></p>
<h1 id="设置列名和索引"><a href="#设置列名和索引" class="headerlink" title="设置列名和索引"></a>设置列名和索引</h1><p>删除前几行无效数据后，我们发现，数据还没有列名，由于我们读取的时候并未设置列名参数，而index=6的行刚好符合列名的需求，因此我们将index=6的行设置为列名。<br>使用rename方法:<br>DataFrame.rename(self, mapper=None, index=None, columns=None, axis=None, copy=True, inplace=False, level=None, errors=’ignore’)<br>参数说明：<br>· mapper：映射结构，修改columns或者index要传入一个映射体，可以是字典、函数，修改列标签跟columns参数一起，修改行标签跟index参数一起。<br>· index：行标签参数，mapper, axis=0 等价于 index=mapper。<br>· columns：列标签参数，mapper, axis=1 等价于 columns=mapper。<br>· axis：轴标签格式，0代表index，1代表columns，默认index。<br>· copy：默认为True，赋值轴标签后面的数据。<br>· inplace：默认为False，不在原处修改数据，返回一个新的DataFrame。<br>· level：默认为None，处理单个轴标签（有的数据会有2个或多个index或columns）。<br>· errors：默认ignore，如果映射体里面包含DataFrame没有的轴标签，忽略不报错。<br><code>df.rename(columns=df.iloc[0],inplace=True)</code><br>这里使用的是将第一行直接设置为列名。df.iloc[0]表示选取的是第一行。<br><img src="/images/pandas3.png" alt=""><br>然后我们发现，列名和第一行是一样的，所以我们再将第一行删除。<br><code>df.drop(labels=6,axis=0)</code><br><img src="/images/pandas4.png" alt=""><br>最后我们重新设置index，使之从0开始排列，使用reset_index方法。<br>DataFrame.reset_index(level=None, drop=False, inplace=False, col_level=0, col_fill=”)。<br>· level控制了具体要还原的那个等级的索引。<br>· drop为False则索引列会被还原为普通列，否则会丢失。<br><img src="/images/pandas5.png" alt=""><br>如此看来，我们的数据初步清洗已经完成，数据已经被规整为一个比较规范格式的数据了，接下来我们可以将数据导出，或者对数据进行进一步分析。</p>
<h1 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h1><p>我们在计算或者处理数据的过程中，有的时候会发现数据中如果有科学计数法，就会有逗号，或者涉及到金额，就会有货币符号。在计算时可能会导致一些问题。<br><img src="/images/pandas7.png" alt=""><br>如上我们看到，代表销售金额的total列的类型是object，object类型在pandas中为字符型，因此如果想要计算总和，在相加的过程中执行的是字符串的连接，而不是数字上的相加。因此我们需要对这个数据进行处理。<br>首先，将数字中的逗号去掉，然后将类型转换为float型（因为有小数）<br>可以用如下一句代码实现：<br><code>df[&#39;total&#39;].apply(lambda x:x.replace(&#39;,&#39;,&#39;&#39;)).astype(&#39;float&#39;)</code><br>注意，astype是生成了数据的副本而不是在原数据上修改，因此还需要一个赋值操作。<br><code>df[&#39;total&#39;]=df[&#39;total&#39;].apply(lambda x:x.replace(&#39;,&#39;,&#39;&#39;)).astype(&#39;float&#39;)</code><br>也可以用函数实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def convert_currency(val):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    Convert the string number value to a float</span><br><span class="line">     - Remove $</span><br><span class="line">     - Remove commas</span><br><span class="line">     - Convert to float type</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    new_val &#x3D; val.replace(&#39;,&#39;,&#39;&#39;).replace(&#39;$&#39;, &#39;&#39;)</span><br><span class="line">    return float(new_val)</span><br></pre></td></tr></table></figure>
<p><code>df[&#39;total&#39;]=df[&#39;total&#39;].apply(convert_currency)</code> 注意赋值操作。</p>
<h1 id="日期数据处理"><a href="#日期数据处理" class="headerlink" title="日期数据处理"></a>日期数据处理</h1><p>观察数据我们可以看到，日期的格式不是我们想要的日期格式，因此我们要处理这个日期列，方便后续解读。<br>首先导入日期相关包<br><code>from datetime import datetime</code><br>然后将日期列转换为datetime<br><code>df[&#39;date/time &#39;] = pd.to_datetime(df[&#39;date/time&#39;])</code><br><img src="/images/pandas8.png" alt=""><br>我们看到日期列还包含了小时，分，秒，我们计算统计时只需精确到天，因此只保留天即可。<br><code>df[&#39;date/time&#39;] = df[&#39;date/time&#39;].dt.date</code><br><img src="/images/pandas9.png" alt=""><br>我们看到日期已经转换为我们想要的格式了。</p>
<h1 id="数据导出-CSV文件"><a href="#数据导出-CSV文件" class="headerlink" title="数据导出(CSV文件)"></a>数据导出(CSV文件)</h1><p>DataFrame.to_csv(<br>path_or_buf=None,<br>sep=’, ‘,<br>na_rep=’’,<br>float_format=None,<br>columns=None,<br>header=True,<br>index=True,<br>index_label=None,<br>mode=’w’,<br>encoding=None,<br>compression=None,<br>quoting=None,<br>quotechar=’”‘,<br>line_terminator=’\n’,<br>chunksize=None,<br>tupleize_cols=None,<br>date_format=None,<br>doublequote=True,<br>escapechar=None,<br>decimal=’.’)<br>参数说明：<br>· path_or_buf : 文件路径，如果没有指定则将会直接返回字符串的 json<br>· sep : 输出文件的字段分隔符，默认为 “,”<br>· na_rep : 用于替换空数据的字符串，默认为’’<br>· float_format : 设置浮点数的格式（几位小数点）<br>· columns : 要写的列<br>· header : 是否保存列名，默认为 True ，保存<br>· index : 是否保存索引，默认为 True ，保存<br>· index_label : 索引的列标签名<br><code>df.to_csv(&#39;/Users/yangqi/Desktop/2019年5月交易记录.csv&#39;,index=False)</code><br>保存后的csv文件如下图所示：<br><img src="/images/pandas6.png" alt=""></p>
<h1 id="DataFrame-read-csv参数总结"><a href="#DataFrame-read-csv参数总结" class="headerlink" title="DataFrame.read_csv参数总结"></a>DataFrame.read_csv参数总结</h1><p>· filepath_or_buffer : 文件读取路径，可以是URL，可用URL类型包括：http, ftp, s3和文件。<br>· sep : 指定分隔符。如果不指定参数，则会尝试使用逗号分隔。分隔符长于一个字符并且<br>不是‘\s+’,将使用python的语法分析器。并且忽略数据中的逗号。正则表达式例子：’\r\t’<br>· delimiter : 与sep类似，定界符，备选分隔符（如果指定该参数，则sep参数失效）<br>· delim_whitespace : 指定空格(例如’ ‘或者’ ‘)是否作为分隔符使用，等效于设定sep=’\s+’。如果这个参数设定为Ture<br>那么delimiter 参数失效。<br>· header : int or list of ints, default ‘infer’指定行数用来作为列名，数据开始行数。<br>如果文件中没有列名，则默认为0，否则设置为None。如果明确设定header=0，就会替换掉原来存在列名。header参数可以是一个list例如：[0,1,3]，这个list表示将文件中的这些行作为列标题（意味着每一列有多个标题），介于中间的行将<br>被忽略掉（例如本例中的2；本例中的数据1,2,4行将被作为多级标题出现，第3行数据将被丢弃，dataframe的数据从<br>第5行开始）<br>注意：如果skip_blank_lines=True 那么header参数忽略注释行和空行，所以header=0表示第一行数据而不是文件的第一行。<br>· names : array-like, default None<br>用于结果的列名列表，如果数据文件中没有列标题行，就需要执行header=None。默认列表中不能出现重复，除非设定参数mangle_dupe_cols=True。<br>· index_col : int or sequence or False, default None<br>用作行索引的列编号或者列名，如果给定一个序列则有多个行索引。<br>如果文件不规则，行尾有分隔符，则可以设定index_col=False 来是的pandas不适用第一列作为行索引。<br>· usecols : array-like, default None<br>返回一个数据子集，该列表中的值必须可以对应到文件中的位置（数字可以对应到指定的列）或者是字符传为文件中的列名。例如：usecols有效参数可能是 [0,1,2]或者是 [‘foo’, ‘bar’, ‘baz’]。使用这个参数可以加快加载速度并降低内存消耗。<br>· as_recarray : boolean, default False<br>不赞成使用：该参数会在未来版本移除。请使用pd.read_csv(…).to_records()替代。<br>返回一个Numpy的recarray来替代DataFrame。如果该参数设定为True。将会优先squeeze参数使用。并且行索引将不再可用，索引列也将被忽略。<br>· squeeze : boolean, default False，如果文件值包含一列，则返回一个Series<br>· prefix : str, default None ，在没有列标题时，给列添加前缀。例如：添加‘X’ 成为 X0, X1, …<br>· mangle_dupe_cols : boolean, default True<br>重复的列，将‘X’…’X’表示为‘X.0’…’X.N’。如果设定为false则会将所有重名列覆盖。<br>· dtype : Type name or dict of column -&gt; type, default None<br>每列数据的数据类型。例如 {‘a’: np.float64, ‘b’: np.int32}<br>· engine : {‘c’, ‘python’}, optional<br>·Parser engine to use. The C engine is faster while the python engine is currently more feature-complete.<br>使用的分析引擎。可以选择C或者是python。C引擎快但是Python引擎功能更加完备。<br>· converters : dict, default None 列转换函数的字典。key可以是列名或者列的序号。<br>· true_values : list, default None ，Values to consider as True<br>· false_values : list, default None，Values to consider as False<br>· skipinitialspace : boolean, default False。忽略分隔符后的空白（默认为False，即不忽略）.<br>· skiprows : list-like or integer, default None。需要忽略的行数（从文件开始处算起），或需要跳过的行号列表（从0开始）。<br>· skipfooter : int, default 0 。从文件尾部开始忽略。 (c引擎不支持)<br>· skip_footer : int, default 0。不推荐使用：建议使用skipfooter ，功能一样。<br>· nrows : int, default None。需要读取的行数（从文件头开始算起）。<br>· na_values : scalar, str, list-like, or dict, default None<br>一组用于替换NA/NaN的值。如果传参，需要制定特定列的空值。默认为‘1.#IND’, ‘1.#QNAN’, ‘N/A’, ‘NA’, ‘NULL’, ‘NaN’, ‘nan’`.<br>· keep_default_na : bool, default True。<br>如果指定na_values参数，并且keep_default_na=False，那么默认的NaN将被覆盖，否则添加。<br>· na_filter : boolean, default True，是否检查丢失值（空字符串或者是空值）。对于大文件来说数据集中没有空值，设定na_filter=False可以提升读取速度。<br>· verbose : boolean, default False。是否打印各种解析器的输出信息，例如：“非数值列中缺失值的数量”等。<br>· skip_blank_lines : boolean, default True，如果为True，则跳过空行；否则记为NaN。<br>· parse_dates : boolean or list of ints or names or list of lists or dict, default False<br>boolean. True -&gt; 解析索引<br>list of ints or names. e.g. If [1, 2, 3] -&gt; 解析1,2,3列的值作为独立的日期列；<br>list of lists. e.g. If [[1, 3]] -&gt; 合并1,3列作为一个日期列使用<br>dict, e.g. {‘foo’ : [1, 3]} -&gt; 将1,3列合并，并给合并后的列起名为”foo”<br>· infer_datetime_format : boolean, default False<br>如果设定为True并且parse_dates 可用，那么pandas将尝试转换为日期类型，如果可以转换，转换方法并解析。在某些情况下会快5~10倍。<br>· keep_date_col : boolean, default False<br>如果连接多列解析日期，则保持参与连接的列。默认为False。<br>· date_parser : function, default None<br>用于解析日期的函数，默认使用dateutil.parser.parser来做转换。Pandas尝试使用三种不同的方式解析，<br>如果遇到问题则使用下一种方式。</p>
<p>1.使用一个或者多个arrays（由parse_dates指定）作为参数；</p>
<p>2.连接指定多列字符串作为一个列作为参数；</p>
<p>3.每行调用一次date_parser函数来解析一个或者多个字符串（由parse_dates指定）作为参数。</p>
<p>dayfirst : boolean, default False</p>
<p>DD/MM格式的日期类型</p>
<p>iterator : boolean, default False</p>
<p>返回一个TextFileReader 对象，以便逐块处理文件。</p>
<p>chunksize : int, default None</p>
<p>文件块的大小， See IO Tools docs for more informationon iterator and chunksize.</p>
<p>compression : {‘infer’, ‘gzip’, ‘bz2’, ‘zip’, ‘xz’, None}, default ‘infer’</p>
<p>直接使用磁盘上的压缩文件。如果使用infer参数，则使用 gzip, bz2, zip或者解压文件名中以‘.gz’, ‘.bz2’, ‘.zip’, or ‘xz’这些为后缀的文件，否则不解压。如果使用zip，那么ZIP包中国必须只包含一个文件。设置为None则不解压。</p>
<p>新版本0.18.1版本支持zip和xz解压</p>
<p>thousands : str, default None</p>
<p>千分位分割符，如“，”或者“.”</p>
<p>decimal : str, default ‘.’</p>
<p>字符中的小数点 (例如：欧洲数据使用’，‘).</p>
<p>float_precision : string, default None</p>
<p>Specifies which converter the C engine should use for floating-point values. The options are None for the ordinary converter, high for the high-precision converter, and round_trip for the round-trip converter.</p>
<p>指定</p>
<p>lineterminator : str (length 1), default None</p>
<p>行分割符，只在C解析器下使用。</p>
<p>quotechar : str (length 1), optional</p>
<p>引号，用作标识开始和解释的字符，引号内的分割符将被忽略。</p>
<p>quoting : int or csv.QUOTE_* instance, default 0</p>
<p>控制csv中的引号常量。可选 QUOTE_MINIMAL (0), QUOTE_ALL (1), QUOTE_NONNUMERIC (2) or QUOTE_NONE (3)</p>
<p>doublequote : boolean, default True</p>
<p>双引号，当单引号已经被定义，并且quoting 参数不是QUOTE_NONE的时候，使用双引号表示引号内的元素作为一个元素使用。</p>
<p>escapechar : str (length 1), default None</p>
<p>当quoting 为QUOTE_NONE时，指定一个字符使的不受分隔符限值。</p>
<p>comment : str, default None</p>
<p>标识着多余的行不被解析。如果该字符出现在行首，这一行将被全部忽略。这个参数只能是一个字符，空行（就像skip_blank_lines=True）注释行被header和skiprows忽略一样。例如如果指定comment=’#’ 解析‘#empty\na,b,c\n1,2,3’ 以header=0 那么返回结果将是以’a,b,c’作为header。</p>
<p>encoding : str, default None</p>
<p>指定字符集类型，通常指定为’utf-8’. List of Python standard encodings</p>
<p>dialect : str or csv.Dialect instance, default None</p>
<p>如果没有指定特定的语言，如果sep大于一个字符则忽略。具体查看csv.Dialect 文档</p>
<p>tupleize_cols : boolean, default False</p>
<p>Leave a list of tuples on columns as is (default is to convert to a Multi Index on the columns)</p>
<p>error_bad_lines : boolean, default True</p>
<p>如果一行包含太多的列，那么默认不会返回DataFrame ，如果设置成false，那么会将改行剔除（只能在C解析器下使用）。</p>
<p>warn_bad_lines : boolean, default True</p>
<p>如果error_bad_lines =False，并且warn_bad_lines =True 那么所有的“bad lines”将会被输出（只能在C解析器下使用）。</p>
<p>low_memory : boolean, default True</p>
<p>分块加载到内存，再低内存消耗中解析。但是可能出现类型混淆。确保类型不被混淆需要设置为False。或者使用dtype 参数指定类型。注意使用chunksize 或者iterator 参数分块读入会将整个文件读入到一个Dataframe，而忽略类型（只能在C解析器中有效）</p>
<p>buffer_lines : int, default None</p>
<p>不推荐使用，这个参数将会在未来版本移除，因为他的值在解析器中不推荐使用</p>
<p>compact_ints : boolean, default False</p>
<p>不推荐使用，这个参数将会在未来版本移除</p>
<p>如果设置compact_ints=True ，那么任何有整数类型构成的列将被按照最小的整数类型存储，是否有符号将取决于use_unsigned 参数</p>
<p>use_unsigned : boolean, default False</p>
<p>不推荐使用：这个参数将会在未来版本移除</p>
<p>如果整数列被压缩(i.e. compact_ints=True)，指定被压缩的列是有符号还是无符号的。</p>
<p>memory_map : boolean, default False</p>
<p>如果使用的文件在内存内，那么直接map文件使用。使用这种方式可以避免文件再次进行IO操作。</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pandas/" rel="tag">pandas</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-python-day23" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/23/python-day23/"
    >python_day23_数据清洗和准备</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/23/python-day23/" class="article-date">
  <time datetime="2020-03-23T13:43:40.000Z" itemprop="datePublished">2020-03-23</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h1 id="数据清洗和准备"><a href="#数据清洗和准备" class="headerlink" title="数据清洗和准备"></a>数据清洗和准备</h1><h2 id="处理缺失数据"><a href="#处理缺失数据" class="headerlink" title="处理缺失数据"></a>处理缺失数据</h2><p>dropna：根据各标签的值中是否存在缺失数据进行过滤，可通过阈值调节对缺失值的容忍度，默认丢弃任何包含缺失值的行，传人how=’all’表示只丢弃全为NA的行<br>fillna：用指定值填充缺失数据；<br>isnull：返回一个含有布尔值的对象，True表示该值缺失，False表示该值有具体值；<br>notnull：isnull的否定式。</p>
<h2 id="数据转换"><a href="#数据转换" class="headerlink" title="数据转换"></a>数据转换</h2><h3 id="移除重复数据"><a href="#移除重复数据" class="headerlink" title="移除重复数据"></a>移除重复数据</h3><p><strong><em>duplicated()</em></strong> 判断重复行<br>返回一个布尔型的Series ，表示各行是否是重复行。<br><strong><em>drop_duplicated()</em></strong> 删除重复行</p>
<h3 id="替换值"><a href="#替换值" class="headerlink" title="替换值"></a>替换值</h3><p>replace(需要被替换的值，替换后的值)</p>
<h3 id="重命名轴索引"><a href="#重命名轴索引" class="headerlink" title="重命名轴索引"></a>重命名轴索引</h3><h3 id="离散化和面元划分"><a href="#离散化和面元划分" class="headerlink" title="离散化和面元划分"></a>离散化和面元划分</h3><p>pd.cut()：返回一个特殊的Categorical对象。可以将其看作一组表示面元名称的字符串，底层是一个表示不同分类名称<br>的类型数组，以及一个codes属性中的年龄数据标签。<br>pd.qcut()：类似于cut，可以根据样本分位数对数据进行面元划分，根据数据的分布情况，cut可能b无法使各个面元中<br>含有相同数量的数据点，而qcut使用的是样本分位数，因此可以得到大小基本相等的面元。</p>
<h2 id="检测和过滤异常值"><a href="#检测和过滤异常值" class="headerlink" title="检测和过滤异常值"></a>检测和过滤异常值</h2><h2 id="排列和随机采样"><a href="#排列和随机采样" class="headerlink" title="排列和随机采样"></a>排列和随机采样</h2><p>利用numpy.random.permutation函数可以轻松实现对Series或者DataFrame的列的排列工作<br>（permuting，随机重排列）<br>sample方法：随机选择样本</p>
<h2 id="计算指标-哑变量（看不懂，待深入学习）"><a href="#计算指标-哑变量（看不懂，待深入学习）" class="headerlink" title="计算指标/哑变量（看不懂，待深入学习）"></a>计算指标/哑变量（看不懂，待深入学习）</h2><h1 id="字符串操作"><a href="#字符串操作" class="headerlink" title="字符串操作"></a>字符串操作</h1>
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python-Pandas-%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97/" rel="tag">python  Pandas 数据清洗</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-python-day22" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/18/python-day22/"
    >python_day22_Pandas</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/18/python-day22/" class="article-date">
  <time datetime="2020-03-18T08:15:30.000Z" itemprop="datePublished">2020-03-18</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h1 id="Pandas读写文件5类问题及30个参数和案例使用"><a href="#Pandas读写文件5类问题及30个参数和案例使用" class="headerlink" title="Pandas读写文件5类问题及30个参数和案例使用"></a>Pandas读写文件5类问题及30个参数和案例使用</h1>
      
      <a class="article-more-link" href="/2020/03/18/python-day22/">阅读更多...</a>
      
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python-Pandas/" rel="tag">python Pandas</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-python-day21" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/17/python-day21/"
    >python_day21_Numpy广播机制</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/17/python-day21/" class="article-date">
  <time datetime="2020-03-17T09:25:53.000Z" itemprop="datePublished">2020-03-17</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h1 id="NumPy-广播机详细解读，10-道练习题和数据集小案例"><a href="#NumPy-广播机详细解读，10-道练习题和数据集小案例" class="headerlink" title="NumPy 广播机详细解读，10 道练习题和数据集小案例"></a>NumPy 广播机详细解读，10 道练习题和数据集小案例</h1>
      
      <a class="article-more-link" href="/2020/03/17/python-day21/">阅读更多...</a>
      
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python-Numpy-%E5%B9%BF%E6%92%AD/" rel="tag">python Numpy 广播</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-python-day20" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/16/python-day20/"
    >python_day20_Numpy进阶</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/16/python-day20/" class="article-date">
  <time datetime="2020-03-16T14:37:35.000Z" itemprop="datePublished">2020-03-16</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h1 id="Numpy进阶高效使用逻辑"><a href="#Numpy进阶高效使用逻辑" class="headerlink" title="Numpy进阶高效使用逻辑"></a>Numpy进阶高效使用逻辑</h1>
      
      <a class="article-more-link" href="/2020/03/16/python-day20/">阅读更多...</a>
      
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python-Numpy/" rel="tag">python Numpy</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-python-day19" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/13/python-day19/"
    >python_day19_相等性比较使用总结</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/13/python-day19/" class="article-date">
  <time datetime="2020-03-13T07:17:05.000Z" itemprop="datePublished">2020-03-13</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%9B%B8%E7%AD%89%E6%80%A7%E4%BD%BF%E7%94%A8%E6%AF%94%E8%BE%83/">相等性使用比较</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h1 id="相等性使用总结"><a href="#相等性使用总结" class="headerlink" title="相等性使用总结"></a>相等性使用总结</h1>
      
      <a class="article-more-link" href="/2020/03/13/python-day19/">阅读更多...</a>
      
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python-%E7%9B%B8%E7%AD%89%E6%80%A7%E6%AF%94%E8%BE%83%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/" rel="tag">python 相等性比较使用总结</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-python-day18" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/09/python-day18/"
    >python_day18_Numpy基础</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/09/python-day18/" class="article-date">
  <time datetime="2020-03-09T14:39:36.000Z" itemprop="datePublished">2020-03-09</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Numpy/">Numpy</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>学好Numpy的一个重要理由在于，它在处理更大数据量时，处理效率明显快于python，并且内置的向量化运算和广播机制，使得使用numpy更加简洁，会少些很多for循环，因此代码的可读性大大增强。<br>Numpy计算快的原因：</p>
<ol>
<li><p>python的list是一个通用结构，它能包括任意类型的对象，并且是动态类型。</p>
</li>
<li><p>numpy的ndarray是静态、同质的类型，当ndarray对象被创建时，元素的类型就确定了，由于是静态类型，所以ndarray间的加、减、乘、除 用C和Fortran实现才成为可能，所以运行起来就会更快。底层代码用C语言和Fortran实现，实现性能无限接近C的处理效率。</p>
<h1 id="创建Numpy数组"><a href="#创建Numpy数组" class="headerlink" title="创建Numpy数组"></a>创建Numpy数组</h1><h2 id="通过构造函数array-创建一维-array"><a href="#通过构造函数array-创建一维-array" class="headerlink" title="通过构造函数array 创建一维 array"></a>通过构造函数array 创建一维 array</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">v &#x3D; np.array([1,2,3,4])</span><br><span class="line">In [3]: v</span><br><span class="line">Out[3]: array([1, 2, 3, 4])</span><br></pre></td></tr></table></figure>
<h2 id="创建二维array"><a href="#创建二维array" class="headerlink" title="创建二维array"></a>创建二维array</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [4]: m &#x3D; array([[1,2],[3,4]])</span><br><span class="line">In [5]: m</span><br><span class="line">Out[5]:</span><br><span class="line">array([[1, 2],</span><br><span class="line">       [3, 4]])</span><br></pre></td></tr></table></figure>
<h2 id="arange数组"><a href="#arange数组" class="headerlink" title="arange数组"></a>arange数组</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [94]: ara &#x3D; np.arange(1,10)</span><br><span class="line">In [95]: ara</span><br><span class="line">Out[95]: array([1, 2, 3, 4, 5, 6, 7, 8, 9])</span><br></pre></td></tr></table></figure>
<h2 id="linspace数组，15个元素"><a href="#linspace数组，15个元素" class="headerlink" title="linspace数组，15个元素"></a>linspace数组，15个元素</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [97]: np.linspace(1,10,15)</span><br><span class="line">Out[97]:</span><br><span class="line">array([ 1.        ,  1.64285714,  2.28571429,  2.92857143,  3.57142857,</span><br><span class="line">        4.21428571,  4.85714286,  5.5       ,  6.14285714,  6.78571429,</span><br><span class="line">        7.42857143,  8.07142857,  8.71428571,  9.35714286, 10.        ])</span><br></pre></td></tr></table></figure>
<h2 id="组合-ndarray-对象"><a href="#组合-ndarray-对象" class="headerlink" title="组合 ndarray 对象"></a>组合 ndarray 对象</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [98]: a &#x3D; np.arange(10).reshape(2,-1) # reshape(2,-1) ，-1 表示行数固定为两行，列数由计算得出。</span><br><span class="line">In [99]: a</span><br><span class="line">Out[99]:</span><br><span class="line">array([[0, 1, 2, 3, 4],</span><br><span class="line">       [5, 6, 7, 8, 9]])</span><br></pre></td></tr></table></figure>
<p>找出a中大于3的元素索引，使用where方法，返回一个元组，带有两个ndarray对象，分别表示大于3的元素第一维、第二维度中的位置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [100]: np.where(a&gt;3)</span><br><span class="line">Out[100]:</span><br><span class="line">(array([0, 1, 1, 1, 1, 1], dtype&#x3D;int64),</span><br><span class="line"> array([4, 0, 1, 2, 3, 4], dtype&#x3D;int64))</span><br><span class="line"> # 竖着看</span><br></pre></td></tr></table></figure>
<p>where方法返回值可读性不强，我们把它拼接为一个ndarray对象：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.array(np.where(c&gt;3))</span><br><span class="line">array([[0, 1, 1, 1, 1, 1],</span><br><span class="line">       [4, 0, 1, 2, 3, 4]])</span><br></pre></td></tr></table></figure>
<p>然后再使用转置，使用np.transpose方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tuple_to_array &#x3D; np.array(np.where(c&gt;3))</span><br><span class="line">np.transpose(tuple_to_array)</span><br><span class="line">array([[0, 4],</span><br><span class="line">       [1, 0],</span><br><span class="line">       [1, 1],</span><br><span class="line">       [1, 2],</span><br><span class="line">       [1, 3],</span><br><span class="line">       [1, 4]])</span><br></pre></td></tr></table></figure>
<h1 id="Numpy数组"><a href="#Numpy数组" class="headerlink" title="Numpy数组"></a>Numpy数组</h1><h2 id="shape属性"><a href="#shape属性" class="headerlink" title="shape属性"></a>shape属性</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [108]: v &#x3D; np.zeros(10)</span><br><span class="line"></span><br><span class="line">In [109]: m &#x3D; np.ones((3,4))</span><br><span class="line"></span><br><span class="line">In [110]: v.shape</span><br><span class="line">Out[110]: (10,)</span><br><span class="line"></span><br><span class="line">In [111]: m.shape</span><br><span class="line">Out[111]: (3, 4)</span><br></pre></td></tr></table></figure>
<h2 id="个数组函数"><a href="#个数组函数" class="headerlink" title="个数组函数"></a>个数组函数</h2></li>
<li><p>arange函数<br>起始点，终点，步长；但是不包括终点。</p>
</li>
<li><p>linspace函数<br>起始点，终点，分割份数；包括终点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [5]: np.linspace(0,10,5)</span><br><span class="line">Out[5]: array([ 0. ,  2.5,  5. ,  7.5, 10. ])</span><br></pre></td></tr></table></figure></li>
<li><p>logspace 函数<br>创建以 e 为底数，指数为1，2，…10的数组：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [17]: np.logspace(1, 10, 10, base&#x3D;e)</span><br><span class="line">Out[17]:</span><br><span class="line">array([2.71828183e+00, 7.38905610e+00, 2.00855369e+01, 5.45981500e+01,</span><br><span class="line">       1.48413159e+02, 4.03428793e+02, 1.09663316e+03, 2.98095799e+03,</span><br><span class="line">       8.10308393e+03, 2.20264658e+04])</span><br></pre></td></tr></table></figure></li>
<li><p>diag<br>创建对角数组：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [22]: np.diag([1,2,3])</span><br><span class="line">Out[22]:</span><br><span class="line">array([[1, 0, 0],</span><br><span class="line">       [0, 2, 0],</span><br><span class="line">       [0, 0, 3]])</span><br></pre></td></tr></table></figure>
<p>主对角线偏移 1 的数组：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [23]: np.diag([1,2,3],k&#x3D;1)</span><br><span class="line">Out[23]:</span><br><span class="line">array([[0, 1, 0, 0],</span><br><span class="line">       [0, 0, 2, 0],</span><br><span class="line">       [0, 0, 0, 3],</span><br><span class="line">       [0, 0, 0, 0]])</span><br></pre></td></tr></table></figure></li>
<li><p>zeros<br>创建元素全都为0的数组：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [24]: np.zeros((3,3))</span><br><span class="line">Out[24]:</span><br><span class="line">array([[0., 0., 0.],</span><br><span class="line">       [0., 0., 0.],</span><br><span class="line">       [0., 0., 0.]])</span><br></pre></td></tr></table></figure></li>
<li><p>ones<br>创建元素都为1的数组：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [25]: np.ones((3,3))</span><br><span class="line">Out[25]:</span><br><span class="line">array([[1., 1., 1.],</span><br><span class="line">       [1., 1., 1.],</span><br><span class="line">       [1., 1., 1.]])</span><br></pre></td></tr></table></figure></li>
<li><p>随机数组<br>np.random模块生成随机数组，更加方便。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [2]: np.random.rand(3,5)</span><br><span class="line">Out[2]:</span><br><span class="line">array([[0.25366147, 0.18996607, 0.01599463, 0.08113353, 0.99794258],</span><br><span class="line">       [0.38813147, 0.33669704, 0.97040282, 0.0836301 , 0.55533133],</span><br><span class="line">       [0.17767781, 0.94982834, 0.52045864, 0.58504198, 0.40904079]])</span><br></pre></td></tr></table></figure></li>
<li><p>索引和筛选<br>Numpy索引，功能强大，不仅支持切片操作，还支持布尔型按条件筛选操作。<br>Numpy还支持掩码索引，用于元素筛选。<br>判断上面切片m[:,:,0]中大于5的元素，写法简洁，无需写for循环。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">判断上面切片 m[:,:,0] 中大于 5 的元素，写法简洁，无需写 for 循环。</span><br><span class="line"></span><br><span class="line">In [12]: mt &#x3D; m[:,:,0]</span><br><span class="line"></span><br><span class="line">In [13]: mt[mt&gt;5]</span><br><span class="line">Out[13]: array([ 6, 12, 15])</span><br></pre></td></tr></table></figure>
<h2 id="案例：数据归一化"><a href="#案例：数据归一化" class="headerlink" title="案例：数据归一化"></a>案例：数据归一化</h2></li>
<li><p>使用 NumPy，下载 iris 数据集。仅提取 iris 数据集的第二列 usecols = [1]：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">url &#x3D; &#39;https:&#x2F;&#x2F;archive.ics.uci.edu&#x2F;ml&#x2F;machine-learning-databases&#x2F;iris&#x2F;iris.data&#39;</span><br><span class="line">wid &#x3D; np.genfromtxt(url, delimiter&#x3D;&#39;,&#39;, dtype&#x3D;&#39;float&#39;, usecols&#x3D;[1])</span><br></pre></td></tr></table></figure>
<p>展示数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">array([3.5, 3. , 3.2, 3.1, 3.6, 3.9, 3.4, 3.4, 2.9, 3.1, 3.7, 3.4, 3. ,</span><br><span class="line">       3. , 4. , 4.4, 3.9, 3.5, 3.8, 3.8, 3.4, 3.7, 3.6, 3.3, 3.4, 3. ,</span><br><span class="line">       3.4, 3.5, 3.4, 3.2, 3.1, 3.4, 4.1, 4.2, 3.1, 3.2, 3.5, 3.1, 3. ,</span><br><span class="line">       3.4, 3.5, 2.3, 3.2, 3.5, 3.8, 3. , 3.8, 3.2, 3.7, 3.3, 3.2, 3.2,</span><br><span class="line">       3.1, 2.3, 2.8, 2.8, 3.3, 2.4, 2.9, 2.7, 2. , 3. , 2.2, 2.9, 2.9,</span><br><span class="line">       3.1, 3. , 2.7, 2.2, 2.5, 3.2, 2.8, 2.5, 2.8, 2.9, 3. , 2.8, 3. ,</span><br><span class="line">       2.9, 2.6, 2.4, 2.4, 2.7, 2.7, 3. , 3.4, 3.1, 2.3, 3. , 2.5, 2.6,</span><br><span class="line">       3. , 2.6, 2.3, 2.7, 3. , 2.9, 2.9, 2.5, 2.8, 3.3, 2.7, 3. , 2.9,</span><br><span class="line">       3. , 3. , 2.5, 2.9, 2.5, 3.6, 3.2, 2.7, 3. , 2.5, 2.8, 3.2, 3. ,</span><br><span class="line">       3.8, 2.6, 2.2, 3.2, 2.8, 2.8, 2.7, 3.3, 3.2, 2.8, 3. , 2.8, 3. ,</span><br><span class="line">       2.8, 3.8, 2.8, 2.8, 2.6, 3. , 3.4, 3.1, 3. , 3.1, 3.1, 3.1, 2.7,</span><br><span class="line">       3.2, 3.3, 3. , 2.5, 3. , 3.4, 3. ])</span><br></pre></td></tr></table></figure>
<p>单变量（univariate），长度为 150 的一维 NumPy 数组。</p>
</li>
<li><p>归一化<br>求出最大值、最小值：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">smax &#x3D; np.max(wid)</span><br><span class="line">smin &#x3D; np.min(wid)</span><br><span class="line"></span><br><span class="line">In [51]: smax,smin</span><br><span class="line">Out[51]: (4.4, 2.0)</span><br></pre></td></tr></table></figure>
<p>归一化公式：<br><code>s = (wid - smin) / (smax - smin)</code><br>还有一个更简便的方法，使用 ptp 方法，它直接求出最大值与最小值的差：<br><code>s = (wid - smin) / wid.ptp()</code></p>
</li>
<li><p>Numpy的打印设置<br>只打印小数点后三位的设置方法：<br><code>np.set_printoptions(precision=3)</code><br>案例：<br>生成数值5～10，shape为（3，5）的随机浮点数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [9]: np.random.seed(100)</span><br><span class="line">In [42]: np.random.randint(5,10,(3,5)) + np.random.rand(3,5)</span><br><span class="line">Out[42]:</span><br><span class="line">array([[9.31623868, 5.68431289, 9.5974916 , 5.85600452, 9.3478736 ],</span><br><span class="line">       [5.66356114, 7.78257215, 7.81974462, 6.60320117, 7.17326763],</span><br><span class="line">       [7.77318114, 6.81505713, 9.21447171, 5.08486345, 8.47547692]])</span><br></pre></td></tr></table></figure>
<p>小结：<br>np.random.random()：随机生成[0,1)之间的浮点数，可选择参数size=()设置生成随机数的尺寸，<br>默认为1。<br>numpy.random.randn(d0, d1, …, dn)：是从标准正态分布中返回一个或多个样本值。<br>numpy.random.rand(d0, d1, …, dn)：的随机样本位于[0, 1)中。<br>numpy.random.randint(low, high=None, size=None, dtype=’l’)：产生随机整数[low,high)</p>
</li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python-Numpy/" rel="tag">python Numpy</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-python-day17" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/09/python-day17/"
    >python_day17_踩坑合集</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/09/python-day17/" class="article-date">
  <time datetime="2020-03-09T13:17:43.000Z" itemprop="datePublished">2020-03-09</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/">踩坑合集</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h1 id="列表与-操作"><a href="#列表与-操作" class="headerlink" title="列表与 * 操作"></a>列表与 * 操作</h1><p>Python中，* 操作符与list结合使用，实现元素复制</p>
<h2 id="复制10个-字符"><a href="#复制10个-字符" class="headerlink" title="复制10个 | 字符"></a>复制10个 | 字符</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [32]: [&#39;|&#39;] * 10</span><br><span class="line">Out[32]: [&#39;|&#39;, &#39;|&#39;, &#39;|&#39;, &#39;|&#39;, &#39;|&#39;, &#39;|&#39;, &#39;|&#39;, &#39;|&#39;, &#39;|&#39;, &#39;|&#39;]</span><br></pre></td></tr></table></figure>
<h2 id="复制5个空列表"><a href="#复制5个空列表" class="headerlink" title="复制5个空列表"></a>复制5个空列表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [33]: [[]] * 5</span><br><span class="line">Out[33]: [[], [], [], [], []]</span><br></pre></td></tr></table></figure>
<p>注意：使用*复制出来的列表，在内存标识符中是一致的，实现的仅仅是浅复制。要想生成不一致的列表，可以使用列表生成式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [10]: b &#x3D; [[] for _ in range(5)]</span><br><span class="line"></span><br><span class="line">In [11]: b[0].extend([1,3,5])</span><br><span class="line"></span><br><span class="line">In [12]: b[1].extend([2,4,6])</span><br><span class="line"></span><br><span class="line">In [13]: b</span><br><span class="line">Out[13]: [[1, 3, 5], [2, 4, 6], [], [], []]</span><br></pre></td></tr></table></figure>
<h1 id="删除列表元素"><a href="#删除列表元素" class="headerlink" title="删除列表元素"></a>删除列表元素</h1><p>列表内元素可重复出现，讨论如何删除列表中的某个元素。<br>如下方法，遍历每个元素，如果等于删除元素，使用 remove 删除元素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def del_item(lst,e):</span><br><span class="line">    for i in lst:</span><br><span class="line">        if i &#x3D;&#x3D; e:</span><br><span class="line">            lst.remove(i)</span><br><span class="line">    return lst</span><br></pre></td></tr></table></figure>
<p>调用 del_item 函数，删除成功：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [19]: del_item([1,3,5,3,2],3)</span><br><span class="line">Out[19]: [1, 5, 2]</span><br></pre></td></tr></table></figure>
<p>这代表删除元素的方法是正确的吗？<br>考虑，删除序列 [1,3,3,3,5] 中的元素 3，结果中仍有元素 3！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [20]: del_item([1,3,3,3,5],3)</span><br><span class="line">Out[20]: [1, 3, 5]</span><br></pre></td></tr></table></figure>
<p>这是为什么？<br>遍历 lst、remove 一次，移掉位置 i 后的所有元素索引都要减一。<br>所以，一旦删除的元素，重复出现在列表中，就总会漏掉一个该删除的元素。<br>正确做法，找到被删除元素后，删除，同时下次遍历索引不加一；若未找到，遍历索引加一，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def del_item2(lst,e):</span><br><span class="line">    i &#x3D; 0</span><br><span class="line">    while i &lt; len(lst):</span><br><span class="line">        if lst[i] &#x3D;&#x3D; e:</span><br><span class="line">            lst.remove(lst[i])</span><br><span class="line">        else:</span><br><span class="line">            i +&#x3D; 1</span><br><span class="line">    return lst</span><br></pre></td></tr></table></figure>
<p>调用函数，删除操作都正确：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [25]: del_item2([1,3,5,3,2],3)</span><br><span class="line">Out[25]: [1, 5, 2]</span><br><span class="line"></span><br><span class="line">In [26]: del_item2([1,3,3,3,5],3)</span><br><span class="line">Out[26]: [1, 5]</span><br></pre></td></tr></table></figure>
<h1 id="函数默认参数为空"><a href="#函数默认参数为空" class="headerlink" title="函数默认参数为空"></a>函数默认参数为空</h1>
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python-%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/" rel="tag">python 踩坑合集</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2020
        氧气
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <span>
  <i>PV:<span id="busuanzi_value_page_pv"></span></i>
  <i>UV:<span id="busuanzi_value_site_uv"></span></i>
</span>
        
      </li>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/mario3.jpeg" alt="SuperMario"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="http://shenyu-vip.lofter.com" target="_blank" rel="noopener">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i></p>
  <div class="reward-box">
    
    
  </div>
</div>
      
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<script src="/js/share.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>




<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['Let&#39;s Play','',''],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script>
  var ayerConfig = {
    mathjax: false
  }
</script>


<script src="/js/ayer.js"></script>


<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>